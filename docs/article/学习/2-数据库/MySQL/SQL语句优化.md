---
tag:
 - 数据库
 - MySQL
---

# SQL语句优化

1. 设计表时候，所有表和字段都应该添加相应的注释
2. 所有表必须使用InnoDB引擎
3. 数据库和表字符集尽量统一为UTF8
4. 应该把所有列定义为NOT NULL
5. 使用逻辑删除的表设计
6. 索引不适合建立在大量重复数据的字段
7. SQL书写格式，关键字大小保持一致，使用缩进
8. 修改或删除重要数据前，要先备份
9. 很多时候用exists代替in
10. 查询SQL尽量不要使用 select *，不是具体的字段
11. 避免在where子句使用 or 来当连接条件
12. 尽量使用数值替代字符串类型
13. 使用varchar代替char
14. where中使用默认值代替null
15. 避免在where子句中使用!=或<>操作符
16. inner join、left join、right join，优先使用inner join
17. 提高group by语句效率，先过滤在分组
18. 清空表优先使用truncate。对于有物理外键不能使用truncate，应该使用delete，因为truncate不能激活触发器
19. 操作delete或者update语句，加个limit或者循环分批次删除
20. 对于表连接采用union all 代替 union
21. 使用批量操作提升插入性能
22. 表连接应该在三张表以下
23. 一张表索引应该不超过五个索引
24. 避免在索引列上使用内置函数
25. 使用组合索引要符合最左前缀匹配
26. 使用like不应该左模糊或全模糊
27. 避免隐式转换
28. 避免在where中对字段进行表达式操作
29. 禁止select count（*） from table；因为不带任何条件的count会引起全表扫描
30. 去重的distinct过滤字段要少
31. 避免大事务操作，提供系统并发能力
32. 避免使用游标
33. 最终效率都可通过`explain`关键字来分析SQL执行效率