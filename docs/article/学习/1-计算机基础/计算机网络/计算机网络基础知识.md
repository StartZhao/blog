---
tag:
 - 计算机基础
---

# 计算机网络基础知识

计算机网络经历了从独立模式向网络互联模式演变的过程。

在独立模式下，数据是单独管理的，但是无法实现良好的团队协作、共享，系统不好扩展。

网络互联模式完善了独立模式中的各种不足，使得效率大大提高，但也出现网络安全等问题。但是在网络互联模式的便利面前，这些问题是可以忽略的，同时这些问题也并非不能解决。

计算机网络按规模进行划分，有 WAN（广域网）、MAN（城域网）、LAN（局域网）。

## 一、计算机网络发展历程

### （一）批处理

就和早期的计算机操作系统一样，最开始都要先经历`批处理`（atch Processing）阶段，批处理的目的也是为了能让更多的人使用计算机。

批处理就是事先将数据装入卡带或者磁带，并且由计算机按照一定的顺序进行读入。

### （二）分时系统

在批处理之后出现的就是分时系统。分时系统指的是多个终端与同一个计算机连接，允许多个用户同时使用一台计算机。分时系统的出现实现了`一人一机`的目的，让用户感觉像是自己在使用计算机，实际上这是一种`独占性`的特性。

> 分时系统的出现促进了像是 BASIC 这种人机交互语言的诞生。

分时系统的出现，同时促进着计算机网络的出现。

### （三）计算机通信

在分时系统中，每个终端与计算机相连，这种独占性的方式并不是计算机之间的通信，因为每个人还是独立的使用计算机。

到了 20 世纪 70 年代，计算机性能有了高速发展，同时体积也变得越来越小，使用计算机的门槛变得更低，越来越多的用户可以使用计算机。

`没有一个计算机是信息孤岛`促使着计算机网络的出现和发展。

### （四）计算机网络的诞生

20 世纪 80 年代，一种能够互连多种计算机的网络随之诞生。它能够让各式各样的计算机相连，从大型的超级计算机或主机到小型电脑。

20 世纪 90 年代，真正实现了一人一机的环境，但是这种环境的搭建任然价格不菲。与此同时，诸如电子邮件、万维网等信息传播方式如雨后春笋般迎来了前所未有的发展，使得互联网从大到整个公司小到每个家庭内部，都得以广泛普及。

### （五）计算机网络的高速发展

现如今，越来越多的终端设备接入互联网，使互联网经历了前所未有的高潮，近年来 3G、4G、5G 通信技术的发展更是互联网高速发展的产物。

许多发展道路各不相同的网络技术也都正在向互联网靠拢。例如，曾经一直作为通信基础设施、支撑通信网络的电话网。随着互联网的发展，其地位也随着时间的推移被 IP 网所取代， IP 也是互联网发展的产物。

### （六）网络安全

计算机在方便我们日常生活的同时，也带来了一些负面因素：计算机病毒的侵害、信息泄露、网络诈骗等问题，对无数企业、个人财产和生活造成影响。计算机网络安全问题日益严峻。

在现实生活中，如果挨揍，通常我们会予以反击。但是，在互联网环境中，如果被不法分子攻击，我们一般是没办法直接还击的，因为还击需要精通计算机和互联网知识的，而这一点很多人做不到。因此，我们只能选择也必须选择做防御。

通常情况下，公司和企业很容易成为不法分子获利的目标。因此，为了避免攻击或者防御网络攻击，公司和企业需要建立安全的互联网连接。

## 二、互联网协议

协议这个名词不仅局限于互联网范畴，也体现在日常生活中。例如，情侣双方约定好在哪个地点吃饭，这个约定也是一种协议。再比如，你应聘成功后，企业会与你签订劳动合同，这种双方的雇佣关系也是一种协议。需要注意的是，一个人对自己的约定不能成为协议，协议的前提条件必须是多人之间的约定。

网络协议就是网络中传递、管理信息的一些规范。如同人与人之间相互交流需要遵循一定的规矩一样，计算机之间的相互通信也需要共同遵守一定的规则，这些规则就称为网络协议。

下面是一些协议的汇总和介绍：

| 网络体系结构 | 协议                                      | 主要用途               |
| ------------ | ----------------------------------------- | ---------------------- |
| TCP/IP       | HTTP、SMTP、TELNET、IP、ICMP、TCP、UDP 等 | 主要用于互联网、局域网 |
| IPX/SPX      | IPX、SPX、NCP                             | 主要用于个人电脑局域网 |
| AppleTalk    | AEP、ADP、DDP                             | 苹果公司现有产品互联   |

ISO 在制定标准化的 OSI 参考模型之前，对网络体系结构相关的问题进行了充分的探讨，最终提出了作为通信协议设计指标的 OSI 参考模型。这一模型将通信协议中必要的功能分为了 7 层。通过这 7 层分层，使那些比较复杂的协议简单化。

在 OSI 标准模型中，每一层协议都接收由它下一层所提供的特定服务，并且负责为上一层提供服务。上层协议和下层协议之间通常会开放接口，同一层之间的交互所遵守的约定叫做协议。

### （一）OSI 标准模型

为了更清楚地理解 OSI 参考模型的七层结构，以下是各层的功能和作用：

1. **物理层（Physical Layer）**
   - **功能**：负责物理连接的建立和维护，定义了物理接口的标准，如电压、电流、物理连接器等。
   - **协议示例**：Ethernet、RS-232
2. **数据链路层（Data Link Layer）**
   - **功能**：负责节点之间的可靠传输，提供帧同步、差错检测和纠正等功能。
   - **协议示例**：Ethernet、PPP（Point-to-Point Protocol）
3. **网络层（Network Layer）**
   - **功能**：负责数据包的路由选择和转发，提供逻辑地址（如 IP 地址）。
   - **协议示例**：IP、ICMP
4. **传输层（Transport Layer）**
   - **功能**：负责端到端的可靠传输，提供流量控制、错误恢复和数据传输服务。
   - **协议示例**：TCP、UDP
5. **会话层（Session Layer）**
   - **功能**：负责建立、管理和终止应用程序之间的会话连接。
   - **协议示例**：RPC（Remote Procedure Call）、NetBIOS
6. **表示层（Presentation Layer）**
   - **功能**：负责数据的表示形式，如数据加密、解密、压缩和解压缩。
   - **协议示例**：SSL/TLS、MIME
7. **应用层（Application Layer）**
   - **功能**：负责提供应用程序之间的网络服务，直接与用户交互。
   - **协议示例**：HTTP、FTP、SMTP、DNS

层间交互：

- **接口**：上层协议和下层协议之间通过接口进行通信。接口定义了下层向上层提供的服务和调用方法。
- **协议**：同一层之间的交互所遵守的约定叫做协议。协议定义了数据格式、控制信息和错误处理等。

OSI 参考模型通过将复杂的通信协议划分为七个层次，使得每层的功能更加明确和独立。这种分层设计不仅简化了协议的设计和实现，还提高了系统的可扩展性和可维护性。

## 三、网络核心概念

### （一）传输方式

网络根据传输方式可以进行分类，一般分成两种：面向连接型和面向无连接型。

+ 面向连接型，在发送数据之前，需要在主机之间建立一条通信线路。
+ 面向无连接型，不要求建立和断开连接，发送方可用于任何时候发送数据，接收端也不知道自己何时从哪里接收到数据。

### （二）分组交换

在互联网应用中，每个终端系统都可以彼此交换信息，这种信息被称为`报文`（Message），报文是一个集大成者，它可以包括你想要的任何东西，比如文字、数据、电子邮件、音频、视频等。为了从源地址向目标地址发送报文，需要把长报文切分为一个个小的数据块，这种数据块称为`分组`（Packets），也就是说，报文是由一个个小块的分组组成。在源地址和目标地址之间，每个分组都要经过通信链路（Communication links）和分组交换机（switch packets），分组要在端系统之间交互需要经过一定的时间，如果两个端系统之间需要交互的分组为 L 比特，链路的传输速率为 R 比特/秒，那么传输时间就是 L/R 秒。

一个端系统需要经过交换机给其他端系统发送分组，当分组到达交换机时，交换机就能够直接进行转发吗？不是的，交换机需要先获得整个分组数据，然后再考虑发送问题，这就是`存储转发传输`。

同时，交换机并不是只与一条通信链路相连。因此，当多个端系统同时向交换机发送分组时，这些分组会按顺序到达交换机。对于每条相连的通信链路，交换机会有一个输出缓存和输出队列与之对应，用于存储交换机准备发往每条链路的分组。

完成一次存储转发操作所用的时间称为存储转发时延，存储转发时延实际上包含了以下四种时延的总和：

1. **传输时延**：将分组的所有比特位从发送方传输到接收方所需的时间。
2. **处理时延**：路由器处理分组所需的时间，包括解析分组头部、查找路由表、更新分组头部等操作。
3. **排队时延**：分组在输出队列中等待传输的时间。
4. **传播时延**：电磁波在物理介质中传播一定距离所需的时间。

这些时延不是一成不变的，其变化程度取决于网络的拥塞程度。因为队列是有容量限制的，当多条链路同时发送分组可能会导致输出缓存无法接受超额的分组后，这些分组会丢失，这种情况被称为`丢包`（packet loss）。

队列中分组的转发是由`路由`确定的。在因特网中，每个端系统都会有一个 IP 地址，当原主机发送一个分组时，在分组的首部都会加上原主机的 IP 地址。每台路由器都会有一个`转发表`（Forwarding Table），当一个分组到达路由器后，路由器会检查分组的目的地址的一部分，并用目的地址搜索转发表，以找出适当的传送链路，然后映射成为输出链路进行转发。

路由器内部也具有`路由选择协议`，用于自动设置转发表。路由选择协议通过网络中的路由器交换信息，动态地更新转发表，以适应网络拓扑的变化和流量的波动。常见的路由选择协议包括内部网关协议（如 RIP、OSPF）和外部网关协议（如 BGP）。

### （三）电路交换

在计算机网络中，另一种通过网络链路和路由进行数据传输的方式是`电路交换`（Circuit Switching）。电路交换在`资源预留`上与分组交换（Packet Switching）不同。具体来说，分组交换不会为每次端系统之间的交互预留缓存和链路传输速率，因此每次传输都需要进行排队；而电路交换会预先预留这些资源。

一个简单的例子可以帮助你理解这一点：这就好比有两家餐馆，餐馆 A 需要预订，而餐馆 B 不需要预订。对于需要预订的餐馆 A，我们必须提前与其联系，但当我们到达目的地时，可以立即入座并点菜。而对于不需要预订的餐馆 B，你虽然不需要提前联系，但到达目的地后可能需要排队等候。

### （四）分组交换和电路交换的对比

电路交换的支持者经常说分组交换不适合实时服务，因为它的端到端时延是不可预测的。然而，分组交换的支持者认为分组交换提供了比电路交换更好的带宽共享；它比电路交换更加简单、更有效，实现成本更低。尽管如此，现在的趋势更多的是朝着分组交换的方向发展。

### （五）分组交换网的时延、丢包和吞吐量

因特网可以看成是一种基础设施，该基础设施为运行在端系统上的分布式应用提供服务。我们希望在计算机网络中任意两个端系统之间传递数据都不会造成数据丢失，这是一个极高的目标，实践中难以达到。因此，在实践中必须限制端系统之间的吞吐量，以控制数据丢失。即使在端系统之间引入时延，也不能保证不会丢失分组。因此，我们需要从`时延`、`丢包`和`吞吐量`三个层面来看计算机网络。

### （六）单播、广播、多播和任播

在计算机网络中，数据传输方式可以根据目的地址的不同分为`单播`（Unicast）、`广播`（Broadcast）、`多播`（Multicast）和`任播`（Anycast）四种类型。每种传输方式都有其特定的应用场景和特点。

- **单播**：一对一的通信，适用于大多数客户端-服务器通信。
- **广播**：一对所有的通信，适用于需要向网络中的所有设备发送消息的情况。
- **多播**：一对多的通信，适用于需要向一组特定设备发送消息的情况。
- **任播**：一对最近的通信，适用于需要将请求发送到最近的服务节点的情况。

## 四、物理媒介

网络传输是需要介质的。一个比特数据包从一个端系统开始传输，经过一系列的链路和路由器，从而到达另外一个端系统。这个数据包会被转发很多次，那么这个数据包经过传输的过程所跨越的媒介就被称为物理媒介。物理媒介有很多种，比如双绞铜线、同轴电缆、多模光纤、陆地无线电信道、卫星无线电信道。其实大致分为两种：引导性媒介和非引导性媒介。