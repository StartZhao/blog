---
tag:
 - é¢è¯•
---

# å‰ç«¯å·¥ç¨‹åŒ–

## 1 ES6

> - ECMAScriptï¼ˆESï¼‰ æ˜¯è§„èŒƒã€ JavaScript æ˜¯ ES çš„å®ç°
> - ES6 çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ åœ¨ 2015 å¹´ 6 æœˆå‘å¸ƒï¼Œæ­£å¼åç§°æ˜¯ã€ŠECMAScript 2015 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2015ï¼‰
> - ES6 æŒ‡æ˜¯ 5.1 ç‰ˆä»¥åçš„ JavaScript çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œæ¶µç›–äº† ES2015ã€ES2016ã€ES2017 ç­‰ç­‰

### 1.1 let

æ¨èä½¿ç”¨ `let` å…³é”®å­—æ›¿ä»£ `var` å…³é”®å­—å£°æ˜å˜é‡ï¼Œå› ä¸º `var` å­˜åœ¨è¯¸å¤šé—®é¢˜ã€‚

#### 1.1.1 è·¨åŸŸ

```js
{
    var a = 1;
    let b = 2;
}
console.log(a); // 1
console.log(b); // ReferenceError: b is not defined
```

#### 1.1.2 é‡å¤å£°æ˜

```js
// var å¯ä»¥å£°æ˜å¤šæ¬¡
// let åªèƒ½å£°æ˜ä¸€æ¬¡
var m = 1
var m = 2
let n = 3
// let n = 4
console.log(m) // 2
console.log(n) // Identifier 'n' has already been declared
```

#### 1.1.3 å˜é‡æå‡

```js
// var ä¼šå˜é‡æå‡
// let ä¸å­˜åœ¨å˜é‡æå‡
console.log(x); // undefined
var x = 10;
console.log(y); //ReferenceError: y is not defined
let y = 20;
```

### 1.2 const

```js
// 1. å£°æ˜ä¹‹åä¸å…è®¸æ”¹å˜
// 2. ä¸€ä½†å£°æ˜å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™
const a = 1;
a = 3; //Uncaught TypeError: Assignment to constant variable.
```

### 1.3 è§£æ„

#### 1.3.1 æ•°ç»„è§£æ„

```js
let arr = [1, 2, 3];
//ä»¥å‰æˆ‘ä»¬æƒ³è·å–å…¶ä¸­çš„å€¼ï¼Œåªèƒ½é€šè¿‡è§’æ ‡ã€‚ES6 å¯ä»¥è¿™æ ·ï¼š
const [x, y, z] = arr;// xï¼Œyï¼Œz å°†ä¸ arr ä¸­çš„æ¯ä¸ªä½ç½®å¯¹åº”æ¥å–å€¼
// ç„¶åæ‰“å°
console.log(x, y, z);
```

#### 1.3.2 å¯¹è±¡è§£æ„

```js
const person = {
    name: "jack",
    age: 21,
    language: ['java', 'js', 'css']
}
// è§£æ„è¡¨è¾¾å¼è·å–å€¼ï¼Œå°† person é‡Œé¢æ¯ä¸€ä¸ªå±æ€§å’Œå·¦è¾¹å¯¹åº”èµ‹å€¼
const {name, age, language} = person;
// ç­‰ä»·äºä¸‹é¢
// const name = person.name;
// const age = person.age;
// const language = person.language;
// å¯ä»¥åˆ†åˆ«æ‰“å°
console.log(name);
console.log(age);
console.log(language);
//æ‰©å±•ï¼šå¦‚æœæƒ³è¦å°† name çš„å€¼èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œå¯ä»¥å¦‚ä¸‹,nn æ˜¯æ–°çš„å˜é‡å
const {name: nn, age, language} = person;
console.log(nn);
console.log(age);
console.log(language);
```

### 1.4 é“¾åˆ¤æ–­

å¦‚æœè¯»å–å¯¹è±¡å†…éƒ¨çš„æŸä¸ªå±æ€§ï¼Œå¾€å¾€éœ€è¦åˆ¤æ–­ä¸€ä¸‹ï¼Œå±æ€§çš„ä¸Šå±‚å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚

æ¯”å¦‚ï¼Œè¯»å– `message.body.user.firstName` è¿™ä¸ªå±æ€§ï¼Œå®‰å…¨çš„å†™æ³•æ˜¯å†™æˆä¸‹é¢è¿™æ ·ã€‚

```js
let  message = null;
// é”™è¯¯çš„å†™æ³•
const  firstName = message.body.user.firstName || 'default';

// æ­£ç¡®çš„å†™æ³•
const firstName = (message
                   && message.body
                   && message.body.user
                   && message.body.user.firstName) || 'default';
console.log(firstName)
```

è¿™æ ·çš„å±‚å±‚åˆ¤æ–­éå¸¸éº»çƒ¦ï¼Œå› æ­¤ ES2020  å¼•å…¥äº†â€œé“¾åˆ¤æ–­è¿ç®—ç¬¦â€ï¼ˆoptional chaining operatorï¼‰`?.`ï¼Œç®€åŒ–ä¸Šé¢çš„å†™æ³•ã€‚

```js
const firstName = message?.body?.user?.firstName || 'default';
```

### 1.5 å‚æ•°é»˜è®¤å€¼

```js
//åœ¨ ES6 ä»¥å‰ï¼Œæˆ‘ä»¬æ— æ³•ç»™ä¸€ä¸ªå‡½æ•°å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œåªèƒ½é‡‡ç”¨å˜é€šå†™æ³•ï¼š
function add(a, b) {
  // åˆ¤æ–­ b æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºå°±ç»™é»˜è®¤å€¼ 1
  b = b || 1;
  return a + b;
}
// ä¼ ä¸€ä¸ªå‚æ•°
console.log(add(10));

//ç°åœ¨å¯ä»¥è¿™ä¹ˆå†™ï¼šç›´æ¥ç»™å‚æ•°å†™ä¸Šé»˜è®¤å€¼ï¼Œæ²¡ä¼ å°±ä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼
function add2(a, b = 1) {
  return a + b;
}

// ä¼ ä¸€ä¸ªå‚æ•°
console.log(add2(10));
```

### 1.6 ç®­å¤´å‡½æ•°

```js
//ä»¥å‰å£°æ˜ä¸€ä¸ªæ–¹æ³•
// var print = function (obj) {
// console.log(obj);
// }
// å¯ä»¥ç®€å†™ä¸ºï¼š
let print = obj => console.log(obj);
// æµ‹è¯•è°ƒç”¨
print(100);
```

```js
// ä¸¤ä¸ªå‚æ•°çš„æƒ…å†µï¼š
let sum = function (a, b) {
    return a + b;
}
// ç®€å†™ä¸ºï¼š
//å½“åªæœ‰ä¸€è¡Œè¯­å¥ï¼Œå¹¶ä¸”éœ€è¦è¿”å›ç»“æœæ—¶ï¼Œå¯ä»¥çœç•¥ {} , ç»“æœä¼šè‡ªåŠ¨è¿”å›ã€‚
let sum2 = (a, b) => a + b;
//æµ‹è¯•è°ƒç”¨
console.log(sum2(10, 10));//20
// ä»£ç ä¸æ­¢ä¸€è¡Œï¼Œå¯ä»¥ç”¨`{}`æ‹¬èµ·æ¥
let sum3 = (a, b) => {
    c = a + b;
    return c;
};
//æµ‹è¯•è°ƒç”¨
console.log(sum3(10, 20));//30
```

### 1.7 æ¨¡æ¿å­—ç¬¦ä¸²

```js
let info = "ä½ å¥½ï¼Œæˆ‘çš„åå­—æ˜¯ï¼šã€"+name+"ã€‘ï¼Œå¹´é¾„æ˜¯ï¼šã€"+age+"ã€‘ï¼Œé‚®ç®±æ˜¯ï¼šã€ã€‘"
console.log(info);

# æ¨¡æ¿å­—ç¬¦ä¸²çš„å†™æ³•
let info = `ä½ å¥½ï¼Œæˆ‘çš„åå­—æ˜¯ï¼š${name}ï¼Œå¹´é¾„æ˜¯ï¼š${person.age}ï¼Œé‚®ç®±æ˜¯ï¼š${person.email}`
console.log(info);
```

### 1.8 Promise

ä»£è¡¨ `å¼‚æ­¥å¯¹è±¡`ï¼Œç±»ä¼¼Javaä¸­çš„ `CompletableFuture`

> **Promise** æ˜¯ç°ä»£ JavaScript ä¸­å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼Œæ˜¯ä¸€ä¸ªç”±å¼‚æ­¥å‡½æ•°è¿”å›çš„å¯ä»¥å‘æˆ‘ä»¬æŒ‡ç¤ºå½“å‰æ“ä½œæ‰€å¤„çš„çŠ¶æ€çš„å¯¹è±¡ã€‚åœ¨ Promise è¿”å›ç»™è°ƒç”¨è€…çš„æ—¶å€™ï¼Œæ“ä½œå¾€å¾€è¿˜æ²¡æœ‰å®Œæˆï¼Œä½† Promise å¯¹è±¡å¯ä»¥è®©æˆ‘ä»¬æ“ä½œæœ€ç»ˆå®Œæˆæ—¶å¯¹å…¶è¿›è¡Œå¤„ç†ï¼ˆæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰

fetch æ˜¯æµè§ˆå™¨æ”¯æŒä»è¿œç¨‹è·å–æ•°æ®çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›çš„å°±æ˜¯ `Promise å¯¹è±¡`

```js
const fetchPromise = fetch(
  "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
);

console.log(fetchPromise);

fetchPromise.then((response) => {
  console.log(`å·²æ”¶åˆ°å“åº”ï¼š${response.status}`);
});

console.log("å·²å‘é€è¯·æ±‚â€¦â€¦");
```

#### 1.8.1 fetch api

fetch æ˜¯æµè§ˆå™¨æ”¯æŒä»è¿œç¨‹è·å–æ•°æ®çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›çš„å°±æ˜¯ `Promise å¯¹è±¡`

```js
const fetchPromise = fetch(
  "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json",
);

console.log(fetchPromise);

fetchPromise.then((response) => {
  console.log(`å·²æ”¶åˆ°å“åº”ï¼š${response.status}`);
});

console.log("å·²å‘é€è¯·æ±‚â€¦â€¦");
```

é€šè¿‡ fetch() API å¾—åˆ°ä¸€ä¸ª Response å¯¹è±¡ï¼›

- **response.status**ï¼š è¯»å–å“åº”çŠ¶æ€ç 
- **response.json()**ï¼šè¯»å–å“åº”ä½“jsonæ•°æ®ï¼›ï¼ˆ**è¿™ä¹Ÿæ˜¯ä¸ªå¼‚æ­¥å¯¹è±¡**ï¼‰

```js
const fetchPromise = fetch(
  "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json",
);

fetchPromise.then((response) => {
  const jsonPromise = response.json();
  jsonPromise.then((json) => {
    console.log(json[0].name);
  });
});
```

#### 1.8.2 Promise çŠ¶æ€

é¦–å…ˆï¼ŒPromise æœ‰ä¸‰ç§çŠ¶æ€ï¼š

- **å¾…å®šï¼ˆpendingï¼‰**ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚è¿™æ˜¯è°ƒç”¨ fetch() è¿”å› Promise æ—¶çš„çŠ¶æ€ï¼Œæ­¤æ—¶è¯·æ±‚è¿˜åœ¨è¿›è¡Œä¸­ã€‚
- **å·²å…‘ç°ï¼ˆfulfilledï¼‰**ï¼šæ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚å½“ Promise å®Œæˆæ—¶ï¼Œå®ƒçš„ then() å¤„ç†å‡½æ•°è¢«è°ƒç”¨ã€‚
- **å·²æ‹’ç»ï¼ˆrejectedï¼‰**ï¼šæ„å‘³ç€æ“ä½œå¤±è´¥ã€‚å½“ä¸€ä¸ª Promise å¤±è´¥æ—¶ï¼Œå®ƒçš„ catch() å¤„ç†å‡½æ•°è¢«è°ƒç”¨ã€‚

#### 1.8.3 Promise å¯¹è±¡

```js
const promise = new Promise((resolve, reject) => {
// æ‰§è¡Œå¼‚æ­¥æ“ä½œ
if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */) {
      resolve(value);// è°ƒç”¨ resolveï¼Œä»£è¡¨ Promise å°†è¿”å›æˆåŠŸçš„ç»“æœ
    } else {
      reject(error);// è°ƒç”¨ rejectï¼Œä»£è¡¨ Promise ä¼šè¿”å›å¤±è´¥ç»“æœ
    }
});
```

ç¤ºä¾‹ï¼š

```js
    let get = function (url, data) {
        return new Promise((resolve, reject) => {
            $.ajax({
                url: url,
                type: "GET",
                data: data,
                success(result) {
                    resolve(result);
                },
                error(error) {
                    reject(error);
                }
            });
        })
    }
```

### 1.9 Async å‡½æ•°

> **async function** å£°æ˜åˆ›å»ºä¸€ä¸ªç»‘å®šåˆ°ç»™å®šåç§°çš„æ–°å¼‚æ­¥å‡½æ•°ã€‚å‡½æ•°ä½“å†…å…è®¸ä½¿ç”¨ await å…³é”®å­—ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥**æ›´ç®€æ´åœ°ç¼–å†™åŸºäº promise çš„å¼‚æ­¥ä»£ç **ï¼Œå¹¶ä¸”**é¿å…äº†æ˜¾å¼åœ°é…ç½® promise é“¾**çš„éœ€è¦ã€‚

- `async å‡½æ•°`æ˜¯ä½¿ç”¨`asyncå…³é”®å­—å£°æ˜çš„å‡½æ•°`ã€‚async å‡½æ•°æ˜¯ [AsyncFunction](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/AsyncFunction) æ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œå¹¶ä¸”å…¶ä¸­å…è®¸ä½¿ç”¨ await å…³é”®å­—ã€‚
- `async å’Œ await` å…³é”®å­—è®©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼å†™å‡ºåŸºäº [Promise](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise) çš„å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæ— éœ€åˆ»æ„åœ°é“¾å¼è°ƒç”¨ promiseã€‚
- `async å‡½æ•°` è¿”å›çš„è¿˜æ˜¯ `Promiseå¯¹è±¡`

```js
async function myFunction() {
  // è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°

}
```

åœ¨å¼‚æ­¥å‡½æ•°ä¸­ï¼Œä½ å¯ä»¥åœ¨è°ƒç”¨ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ä¹‹å‰ä½¿ç”¨ `await` å…³é”®å­—ã€‚è¿™ä½¿å¾—ä»£ç åœ¨è¯¥ç‚¹ä¸Šç­‰å¾…ï¼Œç›´åˆ° Promise è¢«å®Œæˆï¼Œè¿™æ—¶ Promise çš„å“åº”è¢«å½“ä½œè¿”å›å€¼ï¼Œæˆ–è€…è¢«æ‹’ç»çš„å“åº”è¢«ä½œä¸ºé”™è¯¯æŠ›å‡ºã€‚

```js
async function fetchProducts() {
  try {
    // åœ¨è¿™ä¸€è¡Œä¹‹åï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†ç­‰å¾… `fetch()` è°ƒç”¨å®Œæˆ
    // è°ƒç”¨ `fetch()` å°†è¿”å›ä¸€ä¸ªâ€œå“åº”â€æˆ–æŠ›å‡ºä¸€ä¸ªé”™è¯¯
    const response = await fetch(
      "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json",
    );
    if (!response.ok) {
      throw new Error(`HTTP è¯·æ±‚é”™è¯¯ï¼š${response.status}`);
    }
    // åœ¨è¿™ä¸€è¡Œä¹‹åï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†ç­‰å¾… `response.json()` çš„è°ƒç”¨å®Œæˆ
    // `response.json()` è°ƒç”¨å°†è¿”å› JSON å¯¹è±¡æˆ–æŠ›å‡ºä¸€ä¸ªé”™è¯¯
    const json = await response.json();
    console.log(json[0].name);
  } catch (error) {
    console.error(`æ— æ³•è·å–äº§å“åˆ—è¡¨ï¼š${error}`);
  }
}

fetchProducts();
```

### 1.10 æ¨¡å—åŒ–

**å°† JavaScript ç¨‹åºæ‹†åˆ†ä¸ºå¯æŒ‰éœ€å¯¼å…¥çš„å•ç‹¬æ¨¡å—**çš„æœºåˆ¶ã€‚Node.js å·²ç»æä¾›è¿™ä¸ªèƒ½åŠ›å¾ˆé•¿æ—¶é—´äº†ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ JavaScript åº“å’Œæ¡†æ¶å·²ç»å¼€å§‹äº†æ¨¡å—çš„ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œ[CommonJS](https://en.wikipedia.org/wiki/CommonJS) å’ŒåŸºäº [AMD](https://github.com/amdjs/amdjs-api/blob/master/AMD.md) çš„å…¶ä»–æ¨¡å—ç³»ç»Ÿ å¦‚ [RequireJS](https://requirejs.org/)ï¼Œä»¥åŠæœ€æ–°çš„ [Webpack](https://webpack.github.io/) å’Œ [Babel](https://babeljs.io/)ï¼‰ã€‚

å¥½æ¶ˆæ¯æ˜¯ï¼Œæœ€æ–°çš„æµè§ˆå™¨å¼€å§‹åŸç”Ÿæ”¯æŒæ¨¡å—åŠŸèƒ½äº†ã€‚

## 2 npm

### 2.1 ç¯å¢ƒ

+ é…ç½®

```bash
npm config set registry https://registry.npmmirror.com  #è®¾ç½®å›½å†…é˜¿é‡Œäº‘é•œåƒæº
npm config get registry  #æŸ¥çœ‹é•œåƒæº
```

### 2.2 å‘½ä»¤

- npm initï¼š é¡¹ç›®åˆå§‹åŒ–ï¼›

- - npm init -yï¼šé»˜è®¤ä¸€è·¯yesï¼Œä¸ç”¨æŒ¨ä¸ªè¾“å…¥ä¿¡æ¯

- npm install åŒ…åï¼šå®‰è£…jsåŒ…åˆ°é¡¹ç›®ä¸­ï¼ˆä»…å½“å‰é¡¹ç›®æœ‰æ•ˆï¼‰ã€‚æŒ‡å®š **åŒ…å**ï¼Œæˆ–è€… **åŒ…å@ç‰ˆæœ¬å·**

- - npm install -gï¼š å…¨å±€å®‰è£…ï¼Œæ‰€æœ‰éƒ½èƒ½ç”¨
  - å¯ä»¥å» [npmä»“åº“](https://www.npmjs.com/) æœç´¢ç¬¬ä¸‰æ–¹åº“

- npm update åŒ…åï¼šå‡çº§åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬
- npm uninstall åŒ…åï¼šå¸è½½åŒ…
- npm runï¼šé¡¹ç›®è¿è¡Œ

## 3 Vite

### 3.1 ç®€ä»‹

å®˜ç½‘ï¼šhttps://cn.vitejs.dev

- å¿«é€Ÿåˆ›å»ºå‰ç«¯é¡¹ç›®è„šæ‰‹æ¶
- ç»Ÿä¸€çš„å·¥ç¨‹åŒ–è§„èŒƒï¼šç›®å½•ç»“æ„ã€ä»£ç è§„èŒƒã€gitæäº¤è§„èŒƒ ç­‰
- è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼šå‰ç«¯è„šæ‰‹æ¶å¯ä»¥è‡ªåŠ¨è¿›è¡Œä»£ç æ‰“åŒ…ã€å‹ç¼©ã€åˆå¹¶ã€ç¼–è¯‘ç­‰å¸¸è§çš„æ„å»ºå·¥ä½œï¼Œå¯ä»¥é€šè¿‡é›†æˆè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œè‡ªåŠ¨å°†ä»£ç éƒ¨ç½²åˆ°æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒç­‰ï¼›

## 4 Vue3

### 4.1 ç»„ä»¶åŒ–

ç»„ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼›

- ç»„ä»¶ï¼šå°å‹ã€ç‹¬ç«‹ã€å¯å¤ç”¨çš„å•å…ƒ
- ç»„åˆï¼šé€šè¿‡ç»„ä»¶ä¹‹é—´çš„ç»„åˆã€åŒ…å«å…³ç³»æ„å»ºå‡ºä¸€ä¸ªå®Œæ•´åº”ç”¨

å‡ ä¹ä»»æ„ç±»å‹çš„åº”ç”¨ç•Œé¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ï¼›

![1741231508332](images/1741231508332.png)

### 4.2 SFC

Vue çš„**å•æ–‡ä»¶ç»„ä»¶** (å³ *.vue æ–‡ä»¶ï¼Œè‹±æ–‡ Single-File Componentï¼Œç®€ç§° **SFC**) æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†ä¸€ä¸ª Vue ç»„ä»¶çš„æ¨¡æ¿ã€é€»è¾‘ä¸æ ·å¼å°è£…åœ¨å•ä¸ªæ–‡ä»¶ä¸­.

```vue
<script setup>
  //ç¼–å†™è„šæœ¬
</script>

<template>
  //ç¼–å†™é¡µé¢æ¨¡æ¿
</template>

<style scoped>
  //ç¼–å†™æ ·å¼
</style>
```

### 4.3 Vue å·¥ç¨‹

#### 4.3.1 è¿è¡ŒåŸç†

![1741231607511](images/1741231607511.png)

### 4.4 åŸºç¡€ä½¿ç”¨

#### 4.4.1 æ’å€¼

```vue
<script setup>
//åŸºæœ¬æ•°æ®
let name = "å¼ ä¸‰"
let age = 18

//å¯¹è±¡æ•°æ®
let car = {
  brand: "å¥”é©°",
  price: 777
}
</script>

<template>
  <p> name: {{name}} </p>
  <p> age: {{age}} </p>
  <div style="border: 3px solid red">
    <p>å“ç‰Œï¼š{{car.brand}}</p>
    <p>ä»·æ ¼ï¼š{{car.price}}</p>
  </div>
</template>

<style scoped>

</style>vue
```

#### 4.4.2 æŒ‡ä»¤

+ ä½¿ç”¨ `v-on` æŒ‡ä»¤ï¼Œå¯ä»¥ä¸ºå…ƒç´ ç»‘å®šäº‹ä»¶ã€‚å¯ä»¥ç®€å†™ä¸º `@`

```vue
<script setup>
//å®šä¹‰äº‹ä»¶å›è°ƒ
function buy(){
  alert("è´­ä¹°æˆåŠŸ");
}
</script>
<template>
  <button v-on:click="buy">è´­ä¹°</button>
  <button @click="buy">è´­ä¹°</button>
</template>
<style scoped>
</style>
```

![1741231723844](images/1741231723844.png)

 Modifiersï¼šä¿®é¥°ç¬¦è¯¦æƒ…

<https://cn.vuejs.org/guide/essentials/event-handling.html>

+ ä½¿ç”¨ `v-if` æŒ‡ä»¤ï¼Œæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚

```vue
<h1 v-if="awesome">Vue is awesome!</h1>

<button @click="awesome = !awesome">Toggle</button>
<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>

<div v-if="type === 'A'">
  A
</div>
<div v-else-if="type === 'B'">
  B
</div>
<div v-else-if="type === 'C'">
  C
</div>
<div v-else>
  Not A/B/C
</div>

<h1 v-show="ok">Hello!</h1>
```

+ ä½¿ç”¨ `v-for` æŒ‡ä»¤ï¼ŒåŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚`v-for` æŒ‡ä»¤çš„å€¼éœ€è¦ä½¿ç”¨ `item in items` å½¢å¼çš„ç‰¹æ®Šè¯­æ³•ï¼Œå…¶ä¸­ `items` æ˜¯æºæ•°æ®çš„æ•°ç»„ï¼Œè€Œ `item` æ˜¯è¿­ä»£é¡¹çš„**åˆ«å**

```vue
const items = ref([{ message: 'Foo' }, { message: 'Bar' }])
<li v-for="item in items">
  {{ item.message }}
</li>

const parentMessage = ref('Parent')
const items = ref([{ message: 'Foo' }, { message: 'Bar' }])
<li v-for="(item, index) in items">
  {{ parentMessage }} - {{ index }} - {{ item.message }}
</li>

<li v-for="item in items">
  <span v-for="childItem in item.children">
    {{ item.message }} {{ childItem }}
  </span>
</li>

<!-- value è¡¨ç¤ºå±æ€§å€¼ key è¡¨ç¤ºå±æ€§å index è¡¨ç¤ºä½ç½®ç´¢å¼•-->
const myObject = reactive({
  title: 'How to do lists in Vue',
  author: 'Jane Doe',
  publishedAt: '2016-04-10'
})
<li v-for="(value, key, index) in myObject">
  {{ index }}. {{ key }}: {{ value }}
</li>

<MyComponent
  v-for="(item, index) in items"
  :item="item"
  :index="index"
  :key="item.id"
/>
```

+ æ›´å¤šæŒ‡ä»¤

<https://cn.vuejs.org/api/built-in-directives.html>

![1741233172735](images/1741233172735.png)

> v-bind å¯ç®€å†™æˆ ï¼š

#### 4.4.3 å±æ€§ç»‘å®š

#### 4.4.4 å“åº”å¼ - ref()

æ•°æ®çš„åŠ¨æ€å˜åŒ–éœ€è¦åé¦ˆåˆ°é¡µé¢ï¼›

Vueé€šè¿‡`ref()`å’Œ`reactive()`åŒ…è£…æ•°æ®ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªæ•°æ®çš„ä»£ç†å¯¹è±¡ã€‚vueå†…éƒ¨çš„ **åŸºäºä¾èµ–è¿½è¸ªçš„å“åº”å¼ç³»ç»Ÿ** å°±ä¼š**è¿½è¸ª**æ„ŸçŸ¥**æ•°æ®å˜åŒ–**ï¼Œå¹¶**è§¦å‘é¡µé¢**çš„é‡æ–°**æ¸²æŸ“**ã€‚

ä½¿ç”¨æ­¥éª¤ï¼š

1. ä½¿ç”¨ **ref()** åŒ…è£…**åŸå§‹ç±»å‹ã€å¯¹è±¡ç±»å‹æ•°æ®**ï¼Œç”Ÿæˆ **ä»£ç†å¯¹è±¡**
2. **ä»»ä½•æ–¹æ³•ã€jsä»£ç ä¸­**ï¼Œä½¿ç”¨ `ä»£ç†å¯¹è±¡.value` çš„å½¢å¼è¯»å–å’Œä¿®æ”¹å€¼
3. **é¡µé¢ç»„ä»¶ä¸­**ï¼Œç›´æ¥ä½¿ç”¨ `ä»£ç†å¯¹è±¡`

**æ³¨æ„**ï¼šæ¨èä½¿ç”¨ constï¼ˆå¸¸é‡ï¼‰ å£°æ˜ä»£ç†å¯¹è±¡ã€‚ä»£è¡¨ä»£ç†å¯¹è±¡ä¸å¯å˜ï¼Œä½†æ˜¯å†…éƒ¨å€¼å˜åŒ–ä¼šè¢«è¿½è¸ªã€‚

```vue
<script setup>
import { ref } from 'vue'

const count = ref(0)

function increment() {
  count.value++
}
</script>

<template>
  <button @click="increment">
    {{ count }}
  </button>
</template>
```

**æ·±å±‚å“åº”æ€§**

```vue
import { ref } from 'vue'

const obj = ref({
  nested: { count: 0 },
  arr: ['foo', 'bar']
})

function mutateDeeply() {
  // ä»¥ä¸‹éƒ½ä¼šæŒ‰ç…§æœŸæœ›å·¥ä½œ
  obj.value.nested.count++
  obj.value.arr.push('baz')
}
```

#### 4.4.5 å“åº”å¼ - reactive()

ä½¿ç”¨æ­¥éª¤ï¼š

1. ä½¿ç”¨ **reactive()** åŒ…è£…**å¯¹è±¡ç±»å‹æ•°æ®**ï¼Œç”Ÿæˆ **ä»£ç†å¯¹è±¡**
2. **ä»»ä½•æ–¹æ³•ã€jsä»£ç ä¸­**ï¼Œä½¿ç”¨ `ä»£ç†å¯¹è±¡.å±æ€§`çš„å½¢å¼è¯»å–å’Œä¿®æ”¹å€¼
3. **é¡µé¢ç»„ä»¶ä¸­**ï¼Œç›´æ¥ä½¿ç”¨ `ä»£ç†å¯¹è±¡.å±æ€§`

```vue
import { reactive } from 'vue'

const state = reactive({ count: 0 })

<button @click="state.count++">
{{ state.count }}
</button>
```

åŸºæœ¬ç±»å‹ç”¨ ref()ï¼Œå¯¹è±¡ç±»å‹ç”¨ reactive()ï¼Œ`ref è¦ç”¨ .value`ï¼Œ`reactiveç›´æ¥ . `ã€‚é¡µé¢å–å€¼æ°¸ä¸å˜ã€‚

ä¹Ÿå¯ä»¥ ref ä¸€æŠŠæ¢­ï¼Œå¤§ä¸äº† å¤©å¤© .value

#### 4.4.6 è¡¨å•ç»‘å®š

```vue
<div style="display: flex;">
  <div style="border: 1px solid black;width: 300px">
    <form>
      <h1>è¡¨å•ç»‘å®š</h1>
      <p style="background-color: azure"><label>å§“å(æ–‡æœ¬æ¡†)ï¼š</label><input/></p>
      <p style="background-color: azure"><label>åŒæ„åè®®(checkbox)ï¼š</label>
        <input type="checkbox"/>
      </p>
      <p style="background-color: azure">
        <label>å…´è¶£(å¤šé€‰æ¡†)ï¼š</label><br/>
        <label><input type="checkbox" value="è¶³çƒ"/>è¶³çƒ</label>
        <label><input type="checkbox" value="ç¯®çƒ"/>ç¯®çƒ</label>
        <label><input type="checkbox" value="ç¾½æ¯›çƒ"/>ç¾½æ¯›çƒ</label>
        <label><input type="checkbox" value="ä¹’ä¹“çƒ"/>ä¹’ä¹“çƒ</label>
      </p>
      <p style="background-color: azure">
        <label>æ€§åˆ«(å•é€‰æ¡†)ï¼š</label>
        <label><input type="radio" name="sex" value="ç”·">ç”·</label>
        <label><input type="radio" name="sex" value="å¥³">å¥³</label>
      </p>
      <p style="background-color: azure">
        <label>å­¦å†(å•é€‰ä¸‹æ‹‰åˆ—è¡¨)ï¼š</label>
        <select>
          <option disabled value="">é€‰æ‹©å­¦å†</option>
          <option>å°å­¦</option>
          <option>åˆä¸­</option>
          <option>é«˜ä¸­</option>
          <option>å¤§å­¦</option>
        </select>
      </p>
      <p style="background-color: azure">
        <label>è¯¾ç¨‹(å¤šé€‰ä¸‹æ‹‰åˆ—è¡¨)ï¼š</label>
        <br/>
        <select multiple>
          <option disabled value="">é€‰æ‹©è¯¾ç¨‹</option>
          <option>è¯­æ–‡</option>
          <option>æ•°å­¦</option>
          <option>è‹±è¯­</option>
          <option>é“æ³•</option>
        </select>
      </p>
    </form>
  </div>
  <div style="border: 1px solid blue;width: 200px">
    <h1>ç»“æœé¢„è§ˆ</h1>
    <p style="background-color: azure"><label>å§“åï¼š</label></p>
    <p style="background-color: azure"><label>åŒæ„åè®®ï¼š</label>
    </p>
    <p style="background-color: azure">
      <label>å…´è¶£ï¼š</label>
    </p>
    <p style="background-color: azure">
      <label>æ€§åˆ«ï¼š</label>
    </p>
    <p style="background-color: azure">
      <label>å­¦å†ï¼š</label>
    </p>
    <p style="background-color: azure">
      <label>è¯¾ç¨‹ï¼š</label>
    </p>
  </div>
</div>
```

#### 4.4.7 è®¡ç®—å±æ€§ - computed

```vue
<script setup>
import {computed, reactive, toRef, toRefs} from "vue";

//çœç•¥åŸºç¡€ä»£ç 

const totalPrice = computed(()=>{
  return price.value * num.value - coupon.value*100
})

</script>

<template>
  <div class="car">
    <h2>ä¼˜æƒ åˆ¸ï¼š{{ car.coupon }} å¼ </h2>
    <h2>æ•°é‡ï¼š{{ car.num }}</h2>
    <h2>å•ä»·ï¼š{{ car.price }}</h2>
    <h1>æ€»ä»·ï¼š{{totalPrice}}</h1>
    <button @click="getCoupon">è·å–ä¼˜æƒ </button>
    <button @click="addNum">åŠ é‡</button>
    <button @click="changePrice">åŠ ä»·</button>
  </div>

</template>

<style scoped>

</style>
```

### 4.5 è¿›é˜¶ç”¨æ³•

#### 4.5.1 ç›‘å¬ - watch

```vue
watch(num, (value, oldValue, onCleanup) => {
  console.log("newValueï¼š" + value + "ï¼›oldValue:" + oldValue)
  onCleanup(() => {
    console.log("onCleanup....")
  })
})
```

#### 4.5.2 ç”Ÿå‘½å‘¨æœŸ

æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ã€‚

![1741233542752](images/1741233542752.png)

ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š`åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯`ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚

å¸¸ç”¨çš„é’©å­ï¼š

- **onMounted(æŒ‚è½½å®Œæ¯•)**
- **onUpdated(æ›´æ–°å®Œæ¯•)**
- **onBeforeUnmount(å¸è½½ä¹‹å‰)**

```vue
<script setup>
import {onBeforeMount, onBeforeUpdate, onMounted, onUpdated, ref} from "vue";
const  count = ref(0)
const btn01 = ref()

// ç”Ÿå‘½å‘¨æœŸé’©å­
onBeforeMount(()=>{
  console.log('æŒ‚è½½ä¹‹å‰',count.value,document.getElementById("btn01"))
})
onMounted(()=>{
  console.log('æŒ‚è½½å®Œæ¯•',count.value,document.getElementById("btn01"))
})
onBeforeUpdate(()=>{
  console.log('æ›´æ–°ä¹‹å‰',count.value,btn01.value.innerHTML)
})
onUpdated(()=>{
  console.log('æ›´æ–°å®Œæ¯•',count.value,btn01.value.innerHTML)
})
</script>

<template>
  <button ref="btn01" @click="count++"> {{count}} </button>
</template>

<style scoped>
</style>
```

#### 4.5.3 ç»„ä»¶ä¼ å€¼

+ **çˆ¶ä¼ å­ - Props**

**çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å€¼**

**å•å‘æ•°æ®æµæ•ˆæœ**ï¼š

- çˆ¶ç»„ä»¶ä¿®æ”¹å€¼ï¼Œå­ç»„ä»¶å‘ç”Ÿå˜åŒ–
- å­ç»„ä»¶ä¿®æ”¹å€¼ï¼Œçˆ¶ç»„ä»¶ä¸ä¼šæ„ŸçŸ¥åˆ°

```javascript
//çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼šä½¿ç”¨å±æ€§ç»‘å®š
<Son :books="data.books" :money="data.money"/>

//å­ç»„ä»¶å®šä¹‰æ¥å—çˆ¶ç»„ä»¶çš„å±æ€§
let props = defineProps({
  money: {
    type: Number,
    required: true,
    default: 200
  },
  books: Array
});
```

+ **å­ä¼ çˆ¶ - Emit**

**props ç”¨æ¥çˆ¶ä¼ å­ï¼Œemit ç”¨æ¥å­ä¼ çˆ¶**

```javascript
//å­ç»„ä»¶å®šä¹‰å‘ç”Ÿçš„äº‹ä»¶
let emits = defineEmits(['buy']);
function buy(){
  // props.money -= 5;
  emits('buy',-5);
}

//çˆ¶ç»„ä»¶æ„ŸçŸ¥äº‹ä»¶å’Œæ¥å—äº‹ä»¶å€¼
  <Son :books="data.books" :money="data.money"
       @buy="moneyMinis"/>
```

#### 4.5.4 æ’æ§½ - slots

å­ç»„ä»¶å¯ä»¥ä½¿ç”¨æ’æ§½æ¥å—æ¨¡æ¿å†…å®¹ã€‚

 **åŸºæœ¬ä½¿ç”¨**

```html
<!-- ç»„ä»¶å®šä¹‰ -->
<button class="fancy-btn">
  <slot></slot> <!-- æ’æ§½å‡ºå£ -->
</button>

<!-- ç»„ä»¶ä½¿ç”¨ -->
<FancyButton>
  Click me! <!-- æ’æ§½å†…å®¹ -->
</FancyButton>
```

**é»˜è®¤å†…å®¹**

```html
<button type="submit">
  <slot>
    Submit <!-- é»˜è®¤å†…å®¹ -->
  </slot>
</button>
```

**å…·åæ’æ§½**

```html
<div class="container">
  <header>
    <slot name="header"></slot>
  </header>
  <main>
    <slot></slot>
  </main>
  <footer>
    <slot name="footer"></slot>
  </footer>
</div>
```

ä½¿ç”¨ï¼š `v-slot`å¯ä»¥ç®€å†™ä¸º `#`

```html
<BaseLayout>
  <template v-slot:header>
    <!-- header æ’æ§½çš„å†…å®¹æ”¾è¿™é‡Œ -->
  </template>
</BaseLayout>
```

## 5 Vue-Router

### 5.1 ç†è§£è·¯ç”±

> å‰ç«¯ç³»ç»Ÿæ ¹æ®é¡µé¢è·¯å¾„ï¼Œè·³è½¬åˆ°æŒ‡å®šç»„ä»¶ï¼Œå±•ç¤ºå‡ºæŒ‡å®šæ•ˆæœ

![1741245117187](images/1741245117187.png)

### 5.2 è·¯ç”±å…¥é—¨

#### 5.2.1 è¿è¡Œæµç¨‹

![1741245160673](images/1741245160673.png)

#### 5.2.2 è·¯ç”±é…ç½®

ç¼–å†™ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œæµ‹è¯•è·¯ç”±åŠŸèƒ½ï¼›æ­¥éª¤å¦‚ä¸‹ï¼š

1. ç¼–å†™ `router/index.js`æ–‡ä»¶
2. é…ç½®è·¯ç”±è¡¨ä¿¡æ¯
3. åˆ›å»ºè·¯ç”±å™¨å¹¶å¯¼å‡º
4. åœ¨ `main.js`ä¸­ä½¿ç”¨è·¯ç”±
5. åœ¨é¡µé¢ä½¿ç”¨`router-link``router-view`å®Œæˆè·¯ç”±åŠŸèƒ½

#### 5.2.3 è·¯å¾„å‚æ•°

ä½¿ç”¨ `:å˜é‡å`æ¥å—åŠ¨æ€å‚æ•°ï¼›è¿™ä¸ªæˆä¸º *è·¯å¾„å‚æ•°*

```javascript
const routes = [
  // åŒ¹é… /o/3549
  { path: '/o/:orderId' },
  // åŒ¹é… /p/books
  { path: '/p/:productName' },
]
```

### 5.3 åµŒå¥—è·¯ç”±

```js
const routes = [
  {
    path: '/user/:id',
    component: User,
    children: [
      {
        // å½“ /user/:id/profile åŒ¹é…æˆåŠŸ
        // UserProfile å°†è¢«æ¸²æŸ“åˆ° User çš„ <router-view> å†…éƒ¨
        path: 'profile',
        component: UserProfile,
      },
      {
        // å½“ /user/:id/posts åŒ¹é…æˆåŠŸ
        // UserPosts å°†è¢«æ¸²æŸ“åˆ° User çš„ <router-view> å†…éƒ¨
        path: 'posts',
        component: UserPosts,
      },
    ],
  },
]
```

### 5.4 ç¼–ç¨‹å¼

#### 5.4.1 useRouteï¼šè·¯ç”±æ•°æ®

è·¯ç”±ä¼ å‚è·³è½¬åˆ°æŒ‡å®šé¡µé¢åï¼Œé¡µé¢éœ€è¦å–åˆ°ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ `useRoute`æ–¹æ³•ï¼›

æ‹¿åˆ°å½“å‰é¡µè·¯ç”±æ•°æ®ï¼›å¯ä»¥åš

1. è·å–åˆ°å½“å‰è·¯å¾„
2. è·å–åˆ°ç»„ä»¶å
3. è·å–åˆ°å‚æ•°
4. è·å–åˆ°æŸ¥è¯¢å­—ç¬¦ä¸²

```javascript
import {useRoute} from 'vue-router'
const route = useRoute()
// æ‰“å°queryå‚æ•°
console.log(route.query)
// æ‰“å°paramså‚æ•°
console.log(route.params)
```

#### 5.4.2 useRouterï¼šè·¯ç”±å™¨

æ‹¿åˆ°è·¯ç”±å™¨ï¼›å¯ä»¥æ§åˆ¶è·³è½¬ã€å›é€€ç­‰ã€‚

```javascript
import {useRoute, useRouter} from "vue-router";

const router = useRouter();

// å­—ç¬¦ä¸²è·¯å¾„
router.push('/users/eduardo')

// å¸¦æœ‰è·¯å¾„çš„å¯¹è±¡
router.push({ path: '/users/eduardo' })

// å‘½åçš„è·¯ç”±ï¼Œå¹¶åŠ ä¸Šå‚æ•°ï¼Œè®©è·¯ç”±å»ºç«‹ url
router.push({ name: 'user', params: { username: 'eduardo' } })

// å¸¦æŸ¥è¯¢å‚æ•°ï¼Œç»“æœæ˜¯ /register?plan=private
router.push({ path: '/register', query: { plan: 'private' } })

// å¸¦ hashï¼Œç»“æœæ˜¯ /about#team
router.push({ path: '/about', hash: '#team' })

//æ³¨æ„ï¼š `params` ä¸èƒ½ä¸ `path` ä¸€èµ·ä½¿ç”¨
router.push({ path: '/user', params: { username } }) //é”™è¯¯ç”¨æ³• -> /user
```

### 5.5 è·¯ç”±ä¼ å‚

#### 5.5.1 params å‚æ•°

```html
<!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ -->
<RouterLink :to="`/news/detail/001/æ–°é—»001/å†…å®¹001`">{{news.title}}</RouterLink>

<!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ -->
<RouterLink
  :to="{
        name:'xiang', //ç”¨nameè·³è½¬ï¼Œparamsæƒ…å†µä¸‹ï¼Œä¸å¯ç”¨path
        params:{
          id:news.id,
          title:news.title,
          content:news.title
        }
  }"
  >
  {{news.title}}
</RouterLink>
```

#### 5.5.2 query å‚æ•°

```html
<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ -->
<router-link to="/news/detail?a=1&b=2&content=æ¬¢è¿ä½ ">
	è·³è½¬
</router-link>

<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ -->
<RouterLink
  :to="{
    //name:'xiang', //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬
    path:'/news/detail',
    query:{
      id:news.id,
      title:news.title,
      content:news.content
    }
  }"
>
  {{news.title}}
</RouterLink>
```

### 5.6 å¯¼èˆªå®ˆå«

> åªæ¼”ç¤ºå…¨å±€å‰ç½®å®ˆå«ã€‚åç½®é’©å­ç­‰å†…å®¹å‚ç…§å®˜æ–¹æ–‡æ¡£

```javascript
import {createRouter, createWebHistory} from 'vue-router'
import HomeView from '../views/HomeView.vue'

const router = createRouter({
    history: createWebHistory(import.meta.env.BASE_URL),
    routes: [
        {
            path: '/',
            name: 'home',
            component: HomeView
        },
        {
            path: '/about',
            name: 'about',
            // route level code-splitting
            // this generates a separate chunk (About.[hash].js) for this route
            // which is lazy-loaded when the route is visited.
            component: () => import('../views/AboutView.vue')
        },
        {
            path: '/user/:name',
            name: 'User',
            component: () => import('@/views/user/UserInfo.vue'),
            children: [
                {
                    path: 'profile',
                    component: () => import('@/views/user/Profile.vue')
                },
                {
                    path: 'posts',
                    component: () => import('@/views/user/Posts.vue')
                }
            ]
        }
    ]
})

router.beforeEach(async (to, from) => {
    console.log("å®ˆå«ï¼štoï¼š", to)
    console.log("å®ˆå«ï¼šfromï¼š", from)
    if (to.fullPath === '/about') {
       return "/"
    }
})

export default router
```

## 6 Axios

### 6.1 ç®€ä»‹

Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ç½‘ç»œè¯·æ±‚åº“ï¼Œå¯ä»¥ç”¨äºæµè§ˆå™¨å’Œ node.js

### 6.2 è¯·æ±‚

#### 6.2.1 get è¯·æ±‚

```javascript
// å‘ç»™å®šIDçš„ç”¨æˆ·å‘èµ·è¯·æ±‚
axios.get('/user?ID=12345')
  .then(function (response) {
    // å¤„ç†æˆåŠŸæƒ…å†µ
    console.log(response);
  })
  .catch(function (error) {
    // å¤„ç†é”™è¯¯æƒ…å†µ
    console.log(error);
  })
  .finally(function () {
    // æ€»æ˜¯ä¼šæ‰§è¡Œ
  });
```

æºå¸¦è¯·æ±‚å‚æ•°

```javascript
// ä¸Šè¿°è¯·æ±‚ä¹Ÿå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼å®Œæˆï¼ˆå¯é€‰ï¼‰
axios.get('/user', {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  })
  .finally(function () {
    // æ€»æ˜¯ä¼šæ‰§è¡Œ
  });
```

#### 6.2.2 post è¯·æ±‚

> é»˜è®¤`postè¯·æ±‚ä½“`ä¸­çš„æ•°æ®å°†ä¼šä»¥`json`æ–¹å¼æäº¤

```javascript
axios.post('/user', {
  firstName: 'Fred',
  lastName: 'Flintstone'
})
.then(function (response) {
  console.log(response);
})
.catch(function (error) {
  console.log(error);
});
```

### 6.3 å“åº”

å“åº”çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š

```javascript
{
  // `data` ç”±æœåŠ¡å™¨æä¾›çš„å“åº”
  data: {},

  // `status` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç 
  status: 200,

  // `statusText` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯
  statusText: 'OK',

  // `headers` æ˜¯æœåŠ¡å™¨å“åº”å¤´
  // æ‰€æœ‰çš„ header åç§°éƒ½æ˜¯å°å†™ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•è®¿é—®
  // ä¾‹å¦‚: `response.headers['content-type']`
  headers: {},

  // `config` æ˜¯ `axios` è¯·æ±‚çš„é…ç½®ä¿¡æ¯
  config: {},

  // `request` æ˜¯ç”Ÿæˆæ­¤å“åº”çš„è¯·æ±‚
  // åœ¨node.jsä¸­å®ƒæ˜¯æœ€åä¸€ä¸ªClientRequestå®ä¾‹ (in redirects)ï¼Œ
  // åœ¨æµè§ˆå™¨ä¸­åˆ™æ˜¯ XMLHttpRequest å®ä¾‹
  request: {}
}
```

### 6.4 é…ç½®

```js
const instance = axios.create({
  baseURL: 'https://some-domain.com/api/',
  timeout: 1000,
  headers: {'X-Custom-Header': 'foobar'}
});

//å¯ç”¨çš„é…ç½®é¡¹å¦‚ä¸‹ï¼š
{
  // `url` æ˜¯ç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨ URL
  url: '/user',

  // `method` æ˜¯åˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨çš„æ–¹æ³•
  method: 'get', // é»˜è®¤å€¼

  // `baseURL` å°†è‡ªåŠ¨åŠ åœ¨ `url` å‰é¢ï¼Œé™¤é `url` æ˜¯ä¸€ä¸ªç»å¯¹ URLã€‚
  // å®ƒå¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª `baseURL` ä¾¿äºä¸º axios å®ä¾‹çš„æ–¹æ³•ä¼ é€’ç›¸å¯¹ URL
  baseURL: 'https://some-domain.com/api/',

  // `transformRequest` å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®
  // å®ƒåªèƒ½ç”¨äº 'PUT', 'POST' å’Œ 'PATCH' è¿™å‡ ä¸ªè¯·æ±‚æ–¹æ³•
  // æ•°ç»„ä¸­æœ€åä¸€ä¸ªå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ ä¸€ä¸ªBufferå®ä¾‹ï¼ŒArrayBufferï¼ŒFormDataï¼Œæˆ– Stream
  // ä½ å¯ä»¥ä¿®æ”¹è¯·æ±‚å¤´ã€‚
  transformRequest: [function (data, headers) {
    // å¯¹å‘é€çš„ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†

    return data;
  }],

  // `transformResponse` åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®
  transformResponse: [function (data) {
    // å¯¹æ¥æ”¶çš„ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†

    return data;
  }],

  // è‡ªå®šä¹‰è¯·æ±‚å¤´
  headers: {'X-Requested-With': 'XMLHttpRequest'},

  // `params` æ˜¯ä¸è¯·æ±‚ä¸€èµ·å‘é€çš„ URL å‚æ•°
  // å¿…é¡»æ˜¯ä¸€ä¸ªç®€å•å¯¹è±¡æˆ– URLSearchParams å¯¹è±¡
  params: {
    ID: 12345
  },

  // `paramsSerializer`æ˜¯å¯é€‰æ–¹æ³•ï¼Œä¸»è¦ç”¨äºåºåˆ—åŒ–`params`
  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)
  paramsSerializer: function (params) {
    return Qs.stringify(params, {arrayFormat: 'brackets'})
  },

  // `data` æ˜¯ä½œä¸ºè¯·æ±‚ä½“è¢«å‘é€çš„æ•°æ®
  // ä»…é€‚ç”¨ 'PUT', 'POST', 'DELETE å’Œ 'PATCH' è¯·æ±‚æ–¹æ³•
  // åœ¨æ²¡æœ‰è®¾ç½® `transformRequest` æ—¶ï¼Œåˆ™å¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€:
  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams
  // - æµè§ˆå™¨ä¸“å±: FormData, File, Blob
  // - Node ä¸“å±: Stream, Buffer
  data: {
    firstName: 'Fred'
  },

  // å‘é€è¯·æ±‚ä½“æ•°æ®çš„å¯é€‰è¯­æ³•
  // è¯·æ±‚æ–¹å¼ post
  // åªæœ‰ value ä¼šè¢«å‘é€ï¼Œkey åˆ™ä¸ä¼š
  data: 'Country=Brasil&City=Belo Horizonte',

  // `timeout` æŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ¯«ç§’æ•°ã€‚
  // å¦‚æœè¯·æ±‚æ—¶é—´è¶…è¿‡ `timeout` çš„å€¼ï¼Œåˆ™è¯·æ±‚ä¼šè¢«ä¸­æ–­
  timeout: 1000, // é»˜è®¤å€¼æ˜¯ `0` (æ°¸ä¸è¶…æ—¶)

  // `withCredentials` è¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯
  withCredentials: false, // default

  // `adapter` å…è®¸è‡ªå®šä¹‰å¤„ç†è¯·æ±‚ï¼Œè¿™ä½¿æµ‹è¯•æ›´åŠ å®¹æ˜“ã€‚
  // è¿”å›ä¸€ä¸ª promise å¹¶æä¾›ä¸€ä¸ªæœ‰æ•ˆçš„å“åº” ï¼ˆå‚è§ lib/adapters/README.mdï¼‰ã€‚
  adapter: function (config) {
    /* ... */
  },

  // `auth` HTTP Basic Auth
  auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },

  // `responseType` è¡¨ç¤ºæµè§ˆå™¨å°†è¦å“åº”çš„æ•°æ®ç±»å‹
  // é€‰é¡¹åŒ…æ‹¬: 'arraybuffer', 'document', 'json', 'text', 'stream'
  // æµè§ˆå™¨ä¸“å±ï¼š'blob'
  responseType: 'json', // é»˜è®¤å€¼

  // `responseEncoding` è¡¨ç¤ºç”¨äºè§£ç å“åº”çš„ç¼–ç  (Node.js ä¸“å±)
  // æ³¨æ„ï¼šå¿½ç•¥ `responseType` çš„å€¼ä¸º 'stream'ï¼Œæˆ–è€…æ˜¯å®¢æˆ·ç«¯è¯·æ±‚
  // Note: Ignored for `responseType` of 'stream' or client-side requests
  responseEncoding: 'utf8', // é»˜è®¤å€¼

  // `xsrfCookieName` æ˜¯ xsrf token çš„å€¼ï¼Œè¢«ç”¨ä½œ cookie çš„åç§°
  xsrfCookieName: 'XSRF-TOKEN', // é»˜è®¤å€¼

  // `xsrfHeaderName` æ˜¯å¸¦æœ‰ xsrf token å€¼çš„http è¯·æ±‚å¤´åç§°
  xsrfHeaderName: 'X-XSRF-TOKEN', // é»˜è®¤å€¼

  // `onUploadProgress` å…è®¸ä¸ºä¸Šä¼ å¤„ç†è¿›åº¦äº‹ä»¶
  // æµè§ˆå™¨ä¸“å±
  onUploadProgress: function (progressEvent) {
    // å¤„ç†åŸç”Ÿè¿›åº¦äº‹ä»¶
  },

  // `onDownloadProgress` å…è®¸ä¸ºä¸‹è½½å¤„ç†è¿›åº¦äº‹ä»¶
  // æµè§ˆå™¨ä¸“å±
  onDownloadProgress: function (progressEvent) {
    // å¤„ç†åŸç”Ÿè¿›åº¦äº‹ä»¶
  },

  // `maxContentLength` å®šä¹‰äº†node.jsä¸­å…è®¸çš„HTTPå“åº”å†…å®¹çš„æœ€å¤§å­—èŠ‚æ•°
  maxContentLength: 2000,

  // `maxBodyLength`ï¼ˆä»…Nodeï¼‰å®šä¹‰å…è®¸çš„httpè¯·æ±‚å†…å®¹çš„æœ€å¤§å­—èŠ‚æ•°
  maxBodyLength: 2000,

  // `validateStatus` å®šä¹‰äº†å¯¹äºç»™å®šçš„ HTTPçŠ¶æ€ç æ˜¯ resolve è¿˜æ˜¯ reject promiseã€‚
  // å¦‚æœ `validateStatus` è¿”å› `true` (æˆ–è€…è®¾ç½®ä¸º `null` æˆ– `undefined`)ï¼Œ
  // åˆ™promise å°†ä¼š resolvedï¼Œå¦åˆ™æ˜¯ rejectedã€‚
  validateStatus: function (status) {
    return status >= 200 && status < 300; // é»˜è®¤å€¼
  },

  // `maxRedirects` å®šä¹‰äº†åœ¨node.jsä¸­è¦éµå¾ªçš„æœ€å¤§é‡å®šå‘æ•°ã€‚
  // å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä¸ä¼šè¿›è¡Œé‡å®šå‘
  maxRedirects: 5, // é»˜è®¤å€¼

  // `socketPath` å®šä¹‰äº†åœ¨node.jsä¸­ä½¿ç”¨çš„UNIXå¥—æ¥å­—ã€‚
  // e.g. '/var/run/docker.sock' å‘é€è¯·æ±‚åˆ° docker å®ˆæŠ¤è¿›ç¨‹ã€‚
  // åªèƒ½æŒ‡å®š `socketPath` æˆ– `proxy` ã€‚
  // è‹¥éƒ½æŒ‡å®šï¼Œè¿™ä½¿ç”¨ `socketPath` ã€‚
  socketPath: null, // default

  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http
  // and https requests, respectively, in node.js. This allows options to be added like
  // `keepAlive` that are not enabled by default.
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),

  // `proxy` å®šä¹‰äº†ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåï¼Œç«¯å£å’Œåè®®ã€‚
  // æ‚¨å¯ä»¥ä½¿ç”¨å¸¸è§„çš„`http_proxy` å’Œ `https_proxy` ç¯å¢ƒå˜é‡ã€‚
  // ä½¿ç”¨ `false` å¯ä»¥ç¦ç”¨ä»£ç†åŠŸèƒ½ï¼ŒåŒæ—¶ç¯å¢ƒå˜é‡ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚
  // `auth`è¡¨ç¤ºåº”ä½¿ç”¨HTTP Basic authè¿æ¥åˆ°ä»£ç†ï¼Œå¹¶ä¸”æä¾›å‡­æ®ã€‚
  // è¿™å°†è®¾ç½®ä¸€ä¸ª `Proxy-Authorization` è¯·æ±‚å¤´ï¼Œå®ƒä¼šè¦†ç›– `headers` ä¸­å·²å­˜åœ¨çš„è‡ªå®šä¹‰ `Proxy-Authorization` è¯·æ±‚å¤´ã€‚
  // å¦‚æœä»£ç†æœåŠ¡å™¨ä½¿ç”¨ HTTPSï¼Œåˆ™å¿…é¡»è®¾ç½® protocol ä¸º`https`
  proxy: {
    protocol: 'https',
    host: '127.0.0.1',
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },

  // see https://axios-http.com/zh/docs/cancellation
  cancelToken: new CancelToken(function (cancel) {
  }),

  // `decompress` indicates whether or not the response body should be decompressed
  // automatically. If set to `true` will also remove the 'content-encoding' header
  // from the responses objects of all decompressed responses
  // - Node only (XHR cannot turn off decompression)
  decompress: true // é»˜è®¤å€¼

}
```

### 6.5 æ‹¦æˆªå™¨

```js
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(function (config) {
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
  }, function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
  });

// æ·»åŠ å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(function (response) {
    // 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚
    // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
    return response;
  }, function (error) {
    // è¶…å‡º 2xx èŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚
    // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
    return Promise.reject(error);
  });
```

## 7 Pinia

### 7.1 æ ¸å¿ƒ

**Pinia** æ˜¯ Vue çš„**å­˜å‚¨åº“**ï¼Œå®ƒå…è®¸æ‚¨**è·¨ç»„ä»¶/é¡µé¢å…±äº«çŠ¶æ€**ã€‚

Pinia ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š

- Stateï¼šè¡¨ç¤º Pinia Store å†…éƒ¨ä¿å­˜çš„æ•°æ®ï¼ˆdataï¼‰
- Getterï¼šå¯ä»¥è®¤ä¸ºæ˜¯ Store é‡Œé¢æ•°æ®çš„è®¡ç®—å±æ€§ï¼ˆcomputedï¼‰
- Actionsï¼šæ˜¯æš´éœ²ä¿®æ”¹æ•°æ®çš„å‡ ç§æ–¹å¼ã€‚

***è™½ç„¶å¤–éƒ¨ä¹Ÿå¯ä»¥ç›´æ¥è¯»å†™Pinia Store ä¸­ä¿å­˜çš„dataï¼Œä½†æ˜¯æˆ‘ä»¬å»ºè®®ä½¿ç”¨Actionsæš´éœ²çš„æ–¹æ³•æ“ä½œæ•°æ®æ›´åŠ å®‰å…¨***ã€‚

![1741246032168](images/1741246032168.png)

### 7.2 setup å†™æ³•

```js
export const useMoneyStore = defineStore('money', () => {
    const salary = ref(1000); // ref() å°±æ˜¯ state å±æ€§
    const dollar = computed(() => salary.value * 0.14); //  computed() å°±æ˜¯ getters
    const eur = computed(() => salary.value * 0.13); // computed() å°±æ˜¯ getters

    //function() å°±æ˜¯ actions
    const pay = () => {
        salary.value -= 100;
    }

    const win = () => {
        salary.value += 1000;
    }

    //é‡è¦ï¼šè¿”å›å¯ç”¨å¯¹è±¡
    return {salary,dollar,eur,pay,win}
})
```

